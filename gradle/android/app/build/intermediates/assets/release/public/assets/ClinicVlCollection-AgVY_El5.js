import{d as b,I as _,c2 as v,J as D,K as l,M as h,N as C,R as L,t as V,q as R,bA as w,c9 as d,_ as I,r as m,o as N,c as $,w as A,b as u}from"./index-ru8RXlaa.js";import{v as B}from"./TableView-y6cRmPnC.js";import{V as P}from"./viral_load_report-NVgHG6wJ.js";import{D as S}from"./ReportDateSelectionPrompt-eYua7e2Q.js";import"./PopupKeyboard-pOAE1R5L.js";import"./SIngleTouchField-Vfu2y1a0.js";import"./dynamic-import-helper-9HnG3Mif.js";import"./TouchScreenForm-QVpoxsVO.js";import"./ToolbarMediumCard-Mlzu3SIO.js";import"./Transformers-XlEF3tgP.js";import"./ViewPort-LUNlto_Q.js";import"./HisKeypad-SWQeflLk.js";import"./BaseKeyboard-Ac7oOUZ2.js";import"./KbLayouts-9dqmDWmG.js";import"./KbHandler-oqPdZ1-Q.js";import"./overlays-9d7511dd-ZrAfACNh.js";import"./fuse-lCMBsAWg.js";import"./Export-jNK5-P5e.js";import"./HisKeyboard-X4xvPg-w.js";import"./HisKbConfigurations-a7K7dizM.js";import"./MultiFieldDateHelper-5DHelb14.js";const E=b({components:{IonPage:_,IonLoading:v,v2Datatable:B},setup(){const t=D(),o=l([]),s=l(""),r=l(!1),a=new P,p=l(!1),c=h(()=>[[{label:p.value?"Filing#":"ARV#",ref:"identifier"},{label:"First name",ref:"given_name",exportable:!1},{label:"Last name",ref:"family_name",exportable:!1},{label:"Gender",ref:"gender",value:e=>w(e.gender)},{label:"DOB",ref:"birthdate",value:e=>d(e.birthdate)},{label:"Date of VL Order",ref:"order_date",value:e=>d(e.order_date)},{label:"Action",ref:"patient_id",exportable:!1,tdClick:({data:e})=>t.push({path:"/patient/dashboard/".concat(e.patient_id)}),value:()=>"View client"}]]),n=async()=>{if(!(a.startDate&&a.endDate))return V("Start date and end date required!");r.value=!0,o.value=[];try{o.value=await a.getVlCollection()}catch(e){R("Unable to generate report!")}r.value=!1},i=()=>S({onFinish:(e,f,g)=>{s.value="Period (".concat(g,")"),a.startDate=e,a.endDate=f,n()}});return C(()=>{L.get("IS_ART_FILING_NUMBER_ENABLED").then(e=>p.value=e),!o.value.length&&i()}),{reportData:o,isLoading:r,configure:i,generate:n,columns:c,period:s}}});function F(t,o,s,r,a,p){const c=m("ion-loading"),n=m("v2Datatable"),i=m("ion-page");return N(),$(i,null,{default:A(()=>[u(c,{"is-open":t.isLoading,message:"Please wait..."},null,8,["is-open"]),u(n,{title:"VL Collection",subtitle:t.period,columns:t.columns,columnData:t.reportData,rowsPerPage:20,onConfigure:t.configure,onRefresh:()=>t.generate(),"report-prefix":"Clinic"},null,8,["subtitle","columns","columnData","onConfigure","onRefresh"])]),_:1})}const ae=I(E,[["render",F]]);export{ae as default};
