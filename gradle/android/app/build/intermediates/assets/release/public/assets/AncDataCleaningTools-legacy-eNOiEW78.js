System.register(["./index-legacy-Ezw3ESUe.js","./ReportMixin.vue_vue_type_script_lang-legacy-_kY6SfD2.js","./TableReportTemplate-legacy-e2OT7ERS.js","./dynamic-import-helper-legacy-BhGHTWZn.js","./MultiFieldDateHelper-legacy-N4b6PyTj.js","./BasicReportTemplate-legacy-HGFAlSUY.js","./Export-legacy-0q9fKi6l.js","./SIngleTouchField-legacy-bp3msIa4.js","./Pagination-legacy-1JH6Libl.js","./HisStandardForm-legacy-xovrdhbF.js","./TouchScreenForm-legacy--Rf9oyT4.js","./ToolbarMediumCard-legacy-_H0PbO4B.js","./Transformers-legacy-PbfCTy2a.js","./ViewPort-legacy-vAtaXxEN.js","./ReportErrors-legacy-evW-oewf.js","./KbLayouts-legacy-NQmKRJpJ.js","./HisKbConfigurations-legacy-AV_G95Cg.js"],(function(t,e){"use strict";var a,n,i,o,l,r,s,d,u,c,h,m,T,p,_,g,x,f,y;return{setters:[t=>{a=t.d,n=t.I,i=t.V,o=t.ab,l=t.cF,r=t.L,s=t.cG,d=t.S,u=t.H,c=t._,h=t.r,m=t.o,T=t.c,p=t.w,_=t.b},t=>{g=t._},t=>{x=t.R},t=>{f=t.F},t=>{y=t.g},null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const e=a({mixins:[g],components:{ReportTemplate:x,IonPage:n},data:()=>({title:"Data cleaning report",rows:[],columns:[],defaultIndicator:{}}),created(){this.fields=[{id:"indicator",helpText:"Select indicator",type:f.TT_SELECT,requireNext:!1,condition:()=>!this.defaultIndicator,defaultOutput:()=>this.defaultIndicator,validation:t=>i.required(t),options:()=>this.getIndicatorOptions()},...y({id:"start_date",helpText:"Start",required:!0,minDate:()=>"2000-01-01",maxDate:()=>d.getSessionDate(),estimation:{allowUnknown:!1},computeValue:t=>t}),...y({id:"end_date",helpText:"End",required:!0,minDate:(t,e)=>e.start_date,maxDate:()=>d.getSessionDate(),estimation:{allowUnknown:!1},computeValue:t=>t})],this.defaultIndicator=o.find(this.getIndicatorOptions(),{value:this.$route.query.cleaning_tool})||null},methods:{async onPeriod(t,e){const a=t=>u.toStandardHisDisplayFormat(t);this.rows=[],this.title=t.indicator.label;const n=t.indicator;this.columns=n.other.columns,this.report=new l,this.report.setStartDate(e.start_date),this.report.setEndDate(e.end_date),this.period=`${a(e.start_date)} - ${a(e.end_date)}`;const i=await this.report.getDataToolReport(n.value);i&&(this.rows=await Promise.all(i.map((t=>n.other.formatRow(t)))))},showPatientBtn(t){return r.tdBtn("View",(()=>this.$router.push("/patient/dashboard/"+t)))},getIndicatorOptions(){return[{label:"Males with ANC Encounters",value:s.MALES_WITH_ANC_ENCOUNTERS,other:{columns:[[r.thTxt("National ID"),r.thTxt("First name"),r.thTxt("Last name"),r.thTxt("Total Encounters"),r.thTxt("Action")]],formatRow:t=>[r.td(t.identifier),r.td(t.given_name),r.td(t.family_name),r.td(t.total_encounters),this.showPatientBtn(t.patient_id)]}},{label:"Encounters after death",value:s.ENCOUNTERS_AFTER_DEATH,other:{columns:[[r.thTxt("National ID"),r.thTxt("First name"),r.thTxt("Last name"),r.thTxt("Date of death"),r.thTxt("Recent encounter date"),r.thTxt("Count"),r.thTxt("Action")]],formatRow:t=>[r.td(t.identifier),r.td(t.given_name),r.td(t.family_name),r.tdDate(t.patient_died_date),r.tdDate(t.minimum_encounter_datetime),r.td(t.total_encounters),this.showPatientBtn(t.patient_id)]}},{label:"Incomplete visits",value:s.INCOMPLETE_VISITS,other:{columns:[[r.thTxt("National ID"),r.thTxt("Name"),r.thTxt("Visit date"),r.thTxt("Incomplete count"),r.thTxt("Action")]],formatRow:t=>[r.td(t.n_id),r.td(t.name),r.td(t.visit_date),r.td(t.visit_no),this.showPatientBtn(t.patient_id)]}},{label:"Duplicate encounters",value:s.DUPLICATE_ENCOUNTERS,other:{columns:[[r.thTxt("National ID"),r.thTxt("Given name"),r.thTxt("Family name"),r.thTxt("Name"),r.thTxt("Total"),r.thTxt("Action")]],formatRow:t=>[r.td(t.identifier),r.td(t.given_name),r.td(t.family_name),r.td(t.name),r.td(t.total),this.showPatientBtn(t.patient_id)]}},{label:"Missing HIV Status",value:s.MISSING_HIV_STATUS,other:{columns:[[r.thTxt("National ID"),r.thTxt("Given name"),r.thTxt("Family name"),r.thTxt("Action")]],formatRow:t=>[r.td(t.identifier),r.td(t.given_name),r.td(t.family_name),this.showPatientBtn(t.patient_id)]}}]}}});t("default",c(e,[["render",function(t,e,a,n,i,o){const l=h("report-template"),r=h("ion-page");return m(),T(r,null,{default:p((()=>[_(l,{title:t.title,period:t.period,rows:t.rows,fields:t.fields,columns:t.columns,showFilters:!0,onReportConfiguration:t.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])])),_:1})}]]))}}}));
