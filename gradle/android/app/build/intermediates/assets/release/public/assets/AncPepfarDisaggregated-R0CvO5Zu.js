import{R as y}from"./TableReportTemplate-U5DCp6tC.js";import{d as A,I as _,L as e,aZ as i,_ as Y,r as u,o as N,c as D,w as M,b as R}from"./index-ru8RXlaa.js";import{A as w}from"./anc_pepfar_report_service-vKpQwrBZ.js";import{A as T}from"./AncReports-X2ORYpaf.js";import"./Export-jNK5-P5e.js";import"./HisStandardForm-NL7Pv0Lm.js";import"./TouchScreenForm-QVpoxsVO.js";import"./dynamic-import-helper-9HnG3Mif.js";import"./ToolbarMediumCard-Mlzu3SIO.js";import"./Transformers-XlEF3tgP.js";import"./ViewPort-LUNlto_Q.js";import"./ReportErrors-ArLMvFHk.js";import"./BasicReportTemplate-eOGMNgtD.js";import"./SIngleTouchField-Vfu2y1a0.js";import"./Pagination-6U7NhsmN.js";import"./MultiFieldDateHelper-5DHelb14.js";import"./KbLayouts-9dqmDWmG.js";import"./HisKbConfigurations-a7K7dizM.js";const $=A({components:{ReportTemplate:y,IonPage:_},setup(){const r=w.getLocationName(),d=T("Facility Pepfar Report"),{reportData:t,drill:l}=d;t.columns=[[e.thTxt("District"),e.thTxt("Site"),e.thTxt("Month"),e.thTxt("Year"),e.thTxt("ANC Indicator"),e.thTxt("Age Category"),e.thTxt("Value")]],t.other.months={0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"},t.other.ageGroups=["<10","10-14","15-19","20-24","25-29","30-34","35-39","40-49","50+","Unknown","All"],t.other.indicators=["Already on ART","Known at entry positive","Known status","New ANC client","Newly identified negative","Newly identified positive","Newly on ART"];const p=n=>i(n).format("MMM YYYY"),f=(n,o)=>{const s=[n];let a=n;for(;a<i(o).add(-1,"months").format("YYYY-MM-DD");)s.push(a=i(a).add(1,"months").format("YYYY-MM-DD"));return s},c=async n=>{for(const o of n)try{const s=await t.service.generateDisaggregated(o);t.other.indicators.forEach(a=>{t.other.ageGroups.forEach(m=>{const g=s[p(o)][a][m];t.rows.push([e.td(""),e.td(r||"N/A"),e.td(t.other.months[i(o).month()]),e.td(i(o).year()),e.td(a),e.td(m),l("".concat(o,"-").concat(a,"-").concat(m),g)])})})}catch(s){console.warn("".concat(s))}};return{...d,onPeriod:async(n,o)=>{t.rows=[],t.service=new w,t.period="".concat(p(o.start_date)," - ").concat(p(o.end_date)),await c(f(o.start_date,o.end_date))}}}});function C(r,d,t,l,p,f){const c=u("report-template"),h=u("ion-page");return N(),D(h,null,{default:M(()=>[R(c,{title:r.title,period:r.period,rows:r.rows,fields:r.fields,columns:r.columns,config:{showIndex:!0},onReportConfiguration:r.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}const Z=Y($,[["render",C]]);export{Z as default};
