System.register(["./index-legacy-C7ieadqO.js","./TableView-legacy-Cowq6FM8.js"],(function(t,e){"use strict";var a,n,i,r,l,o,s,u,c,d,f,b,p,h,g,m,_;return{setters:[t=>{a=t.d,n=t.E,i=t.j,r=t.a1,l=t.am,o=t.ap,s=t.b7,u=t.h,c=t.bP,d=t.bf,f=t._,b=t.M,p=t.o,h=t.c,g=t.w,m=t.m},t=>{_=t.v}],execute:function(){const e=a({props:{title:{type:String,default:"Drilldown"},patientIdentifiers:{type:Object},onFinish:{type:Function}},components:{IonPage:n,v2Datatable:_},setup(t){const e=i(!0),a=i("-"),n=i([]),f=r(),b=[[{label:"ARV Number",ref:"identifier"},{label:"Gender",ref:"gender"},{label:"Birthdate",ref:"birthdate"},{label:"Art start date",ref:"art_start_date"},{label:"Action",ref:"patient_id",exportable:!1,tdClick:({data:t})=>f.push({path:`/patient/dashboard/${t.person_id}`}),value:()=>"View client"}]];return l((()=>t.patientIdentifiers),(async t=>{if(n.value=[],a.value="Total: 0",!t||!t.length)return;const i=o.chunk(t,1e3);for(const l of i){try{if(!e.value)break;const t=(await s.getPersons(l)).map((t=>({...t,birthdate:u(t.birthdate),art_start_date:u(t.art_start_date),gender:c(t.gender)})));n.value=[...n.value,...t]}catch(r){console.error(r)}a.value=`Total: ${n.value.length} of ${(t||[]).length}`,await d(100)}}),{immediate:!0}),{columns:b,subtitle:a,reportData:n,canLoadData:e,ITEMS_PER_PAGE:25,runFinishAction:function(){e.value=!1,"function"==typeof t.onFinish&&t.onFinish()}}}});t("A",f(e,[["render",function(t,e,a,n,i,r){const l=b("v2Datatable"),o=b("ion-page");return p(),h(o,null,{default:g((()=>[m(l,{title:t.title,subtitle:t.subtitle,columnData:t.reportData,columns:t.columns,"on-finish":t.runFinishAction,rowsPerPage:t.ITEMS_PER_PAGE},null,8,["title","subtitle","columnData","columns","on-finish","rowsPerPage"])])),_:1})}]]))}}}));
