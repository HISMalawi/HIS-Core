import{d as n,E as p,a2 as e,K as d,V as m,cH as a,_ as u,M as s,o as c,c as h,w as f,m as _}from"./index-VkXRcily.js";import{_ as w}from"./ReportMixin.vue_vue_type_script_lang-DKwYDq25.js";import{R as v}from"./TableReportTemplate-De_mJFwt.js";import"./BasicReportTemplate-CGbAtSzo.js";import"./Export-C2YlkRsK.js";import"./Pagination-_uUDz2SS.js";import"./HisStandardForm-BPnHI1R7.js";import"./ReportErrors-De1Zp7mn.js";const T=n({mixins:[w],components:{ReportTemplate:v,IonPage:p},data:()=>({title:"",totalClients:[],rows:[],reportReady:!1,isLoading:!1,columns:[[e.thTxt("ARV#"),e.thTxt("Gender"),e.thTxt("Birthdate"),e.thTxt("Specimen"),e.thTxt("Ordered"),e.thTxt("Result"),e.thTxt("Released"),e.thTxt("Curr. Regimen"),e.thTxt("Action",{csvExportable:!1,pdfExportable:!1})]]}),created(){this.fields=[...this.getDateDurationFields(),{id:"result_type",helpText:"Select result type",type:d.TT_SELECT,validation:o=>m.required(o),options:()=>[{label:"Viraemia 1000+",value:"viraemia-1000"},{label:"Suppressed",value:"suppressed"},{label:"Low level viraemia",value:"low-level-viraemia"}]}]},methods:{async onPeriod(o,t){const r=o.result_type;this.rows=[],this.report=new a,this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),this.report.setOccupation(t.occupation),this.period=this.report.getDateIntervalPeriod(),this.title="".concat(r.label," Report <small><b>(between the period of (").concat(this.period,")</b></small>"),this.customFileName="Clinic ".concat(a.getLocationName()," ").concat(r.label," ").concat(this.period),this.setRows(await this.report.getViralLoadResults(r.value.toLowerCase()))},async setRows(o){this.sortByArvNumber(o).forEach(t=>{this.rows.push([e.td(t.arv_number),e.td(this.formatGender(t.gender)),e.tdDate(t.birthdate),e.td(t.specimen),e.tdDate(t.order_date),e.td("".concat(t.result_modifier||""," ").concat(t.result)),e.tdDate(t.result_date),e.td(t.current_regimen||""),e.tdBtn("View",()=>this.$router.push("/patient/dashboard/".concat(t.patient_id)))])})}}});function b(o,t,r,R,$,x){const i=s("report-template"),l=s("ion-page");return c(),h(l,null,{default:f(()=>[_(i,{title:o.title,period:o.period,rows:o.rows,fields:o.fields,columns:o.columns,canExportPDf:!1,showtitleOnly:!0,customFileName:o.customFileName,onReportConfiguration:o.onPeriod,"report-prefix":"Clinic"},null,8,["title","period","rows","fields","columns","customFileName","onReportConfiguration"])]),_:1})}const F=u(T,[["render",b]]);export{F as default};
