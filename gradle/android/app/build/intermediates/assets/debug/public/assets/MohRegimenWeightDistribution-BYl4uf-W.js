import{_ as g}from"./ReportMixin.vue_vue_type_script_lang-a2Cv1Xr1.js";import{b as d,a as w,W as R}from"./regimen_report_service-Bt3Dk7kl.js";import{d as _,x as D,T as t,aj as l,A as E,B as c,o as T,c as I,w as N,a as b}from"./index-CmAu9cV_.js";import{R as k}from"./TableReportTemplate-CNNSGRI2.js";import"./BasicReportTemplate-FCQOkDhr.js";import"./Export-DV3j_OQc.js";import"./Pagination-Dpv4ieGX.js";import"./HisStandardForm-7nJndMCO.js";import"./ReportErrors-Bih00KK0.js";const P=_({mixins:[g],components:{ReportTemplate:k,IonPage:D},data:()=>({rows:[],title:"Regimen distribution (Weight)",columns:[]}),created(){this.columns=[[t.thTxt("Weight band"),t.thTxt("Gender"),...d.map(o=>t.thNum(o)),t.thNum("Unknown"),t.thNum("Total (regimen)")]],this.fields=this.getDateDurationFields()},methods:{async onPeriod(o,n){this.rows=[],this.report=new w,this.report.setOccupation(n.occupation),this.report.setStartDate(n.start_date),this.report.setEndDate(n.end_date),this.period=this.report.getDateIntervalPeriod();const a=await this.report.getRegimensByWeight();await this.setRows(a)},async setRows(o){const n=s=>[...d,"N/A"].map(i=>{const e=s.filter(r=>!!r[i]).map(r=>Object.values(r)[0]);return t.td(l.isEmpty(e)?0:e[0])}),a=s=>s.reduce((i,e)=>i+e.td,0);R.forEach(s=>{o.filter(e=>e.weight===s).forEach(e=>{const r=n(e.males),p=n(e.females),h=[t.td(s),t.td("Male"),...r,t.td(a(r))],u=[t.td(s),t.td("Female"),...p,t.td(a(p))];if(this.rows.push(h),this.rows.push(u),!l.isEmpty(e.unknown_gender)){const m=n(e.unknown_gender),f=a(m);this.rows.push([t.td(s),t.td("Unknown Gender"),...m,t.td(f)])}})})}}});function W(o,n,a,s,i,e){const r=c("report-template"),p=c("ion-page");return T(),I(p,null,{default:N(()=>[b(r,{title:o.title,period:o.period,rows:o.rows,fields:o.fields,columns:o.columns,reportPrefix:"MoH",config:{showIndex:!1},enabledPDFHorizontalPageBreak:!0,onReportConfiguration:o.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}const A=E(P,[["render",W]]);export{A as default};
