import{d as n,x as l,cB as p,T as t,cE as d,b7 as m,S as c,A as h,B as a,o as u,c as f,w as _,a as x}from"./index-CmAu9cV_.js";import{_ as T}from"./ReportMixin.vue_vue_type_script_lang-a2Cv1Xr1.js";import{R as w}from"./TableReportTemplate-CNNSGRI2.js";import"./BasicReportTemplate-FCQOkDhr.js";import"./Export-DV3j_OQc.js";import"./Pagination-Dpv4ieGX.js";import"./HisStandardForm-7nJndMCO.js";import"./ReportErrors-Bih00KK0.js";const D=n({mixins:[T],components:{ReportTemplate:w,IonPage:l},data:()=>({title:"Clinic Clients due for VL <small>(clients with appointments in specified period)</small>",rows:[],columns:[]}),async created(){const s=await p.filingNumbersEnabled();this.columns.push([t.thTxt(s?"Filing #":"ARV#"),t.thTxt("First name",{csvExportable:!1,pdfExportable:!0}),t.thTxt("Last name",{csvExportable:!1,pdfExportable:!0}),t.thTxt("Gender"),t.thTxt("Age"),t.thTxt("App."),t.thTxt("ART started"),t.thTxt("Months on ART"),t.thTxt("Milestone"),t.thTxt("Ordered"),t.thTxt("Result"),t.thTxt("Released")]),this.fields=this.getDateDurationFields(!1,!1,5,null)},methods:{async onPeriod(s,e){this.rows=[],this.report=new d,this.report.setStartDate(e.start_date),this.report.setEndDate(e.end_date),this.report.setOccupation(e.occupation),this.period=this.report.getDateIntervalPeriod();const o=await this.report.getClientsDueForVl();this.setRows(o)},async setRows(s){s.forEach(e=>{this.rows.push([t.tdLink(e.arv_number,()=>this.confirmPatient(e.patient_id)),t.td(e.given_name),t.td(e.family_name),t.td(this.formatGender(e.gender)),t.td(e.birthdate?m(c.getSessionDate()).diff(e.birthdate,"years"):"N/A"),t.tdDate(e.appointment_date),t.tdDate(e.start_date),t.td(e.months_on_art),t.tdDate(e.mile_stone),t.tdDate(e.last_result_order_date),t.td(e.last_result),t.tdDate(e.last_result_date)])})}}});function R(s,e,o,g,b,C){const r=a("report-template"),i=a("ion-page");return u(),f(i,null,{default:_(()=>[x(r,{title:s.title,period:s.period,rows:s.rows,fields:s.fields,columns:s.columns,showtitleOnly:!0,canExportPDf:!0,encryptPDF:!0,onReportConfiguration:s.onPeriod,"report-prefix":"Clinic"},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}const O=h(D,[["render",R]]);export{O as default};
