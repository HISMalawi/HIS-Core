import{d as m,Q as n,W as v,o as D,c as _,w as g,a as u,b as f,ct as b,cA as o,E as y,K as C,ch as h,x}from"./index-CmAu9cV_.js";import{v as w}from"./TableView-Bzp4sqn4.js";import{S as R}from"./stock_report_service-BCa3SfFr.js";import{D as S}from"./ReportDateSelectionPrompt-CxOATCCt.js";import"./Export-DV3j_OQc.js";const I=m({__name:"ClinicDiscrepancyReport",setup(q){const t=n([]),i=n(""),r=n(!1),a=new R,p=[[{label:"Drug Count Date",ref:"verification_date",value:e=>b(e.verification_date)},{label:"Drug Name",ref:"short_name"},{label:"Expected Count",ref:"expected_quantity",value:e=>o(e.expected_quantity)},{label:"Verified Count",ref:"current_quantity",value:e=>o(e.current_quantity)},{label:"Difference",ref:"difference",value:e=>o(e.difference)},{label:"Reason",ref:"variance_reason"}]],s=async()=>{if(!(a.startDate&&a.endDate))return y("Start date and end date required!");r.value=!0,t.value=[];try{t.value=await a.getDiscrepancyReport()}catch(e){C("Unable to generate report!")}r.value=!1},l=()=>S({onFinish:(e,c,d)=>{i.value="Period (".concat(d,")"),a.startDate=e,a.endDate=c,s()}});return v(()=>!t.value.length&&l()),(e,c)=>(D(),_(f(x),null,{default:g(()=>[u(f(h),{"is-open":r.value,message:"Please wait..."},null,8,["is-open"]),u(w,{title:"Clinic Discrepancy Report","report-prefix":"Clinic",subtitle:i.value,columns:p,columnData:t.value,rowsPerPage:20,onConfigure:l,onRefresh:s},null,8,["subtitle","columnData"])]),_:1}))}});export{I as default};
