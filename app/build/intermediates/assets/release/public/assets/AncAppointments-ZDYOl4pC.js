import{cE as s,d as c,I as f,V as u,L as e,_ as h,r as p,o as g,c as _,w as T,b as A}from"./index-ru8RXlaa.js";import{R as w}from"./TableReportTemplate-U5DCp6tC.js";import{F as v}from"./dynamic-import-helper-9HnG3Mif.js";import{A as b}from"./AncReports-X2ORYpaf.js";import"./Export-jNK5-P5e.js";import"./HisStandardForm-NL7Pv0Lm.js";import"./TouchScreenForm-QVpoxsVO.js";import"./ToolbarMediumCard-Mlzu3SIO.js";import"./Transformers-XlEF3tgP.js";import"./ViewPort-LUNlto_Q.js";import"./ReportErrors-ArLMvFHk.js";import"./BasicReportTemplate-eOGMNgtD.js";import"./SIngleTouchField-Vfu2y1a0.js";import"./Pagination-6U7NhsmN.js";import"./MultiFieldDateHelper-5DHelb14.js";import"./KbLayouts-9dqmDWmG.js";import"./HisKbConfigurations-a7K7dizM.js";class m extends s{generateBookedAppointments(){return s.getJson("programs/".concat(this.programID,"/booked_appointments"),{date:this.startDate,paginated:!1})}}const C=c({components:{ReportTemplate:w,IonPage:f},setup(){const r=b("Booked clients"),{reportData:t,fd:i,gotoPatientDashboard:a}=r;return t.service=new m,t.other.appointments=[],t.fields=[{id:"date",helpText:"Select date",type:v.TT_DATE_PICKER,defaultValue:()=>m.getSessionDate(),validation:o=>u.required(o),onValue:async o=>(t.service.setStartDate(o),t.other.appointments[o]||(t.other.appointments[o]=await t.service.generateBookedAppointments()||[]),!0),config:{infoItems:o=>{var n;return[{label:"Appointments",value:((n=t.other.appointments[o])==null?void 0:n.length)||0}]}}}],t.columns=[[e.thTxt("Identifier"),e.thTxt("First name"),e.thTxt("Last name"),e.thTxt("Gender"),e.thTxt("birthdate"),e.thTxt("Actions")]],{...r,onPeriod:async o=>{t.rows=[],t.period=i(o.date),t.rows=t.other.appointments[o.date].map(n=>[e.td(n.npid),e.td(n.given_name),e.td(n.family_name),e.td(n.gender),e.tdDate(n.birthdate),e.tdBtn("View",()=>a(n.person_id))])}}}});function D(r,t,i,a,d,o){const n=p("report-template"),l=p("ion-page");return g(),_(l,null,{default:T(()=>[A(n,{title:r.title,period:r.period,rows:r.rows,fields:r.fields,columns:r.columns,onReportConfiguration:r.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}const N=h(C,[["render",D]]);export{N as default};
