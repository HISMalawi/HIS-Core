(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ee0b2d28"],{5713:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var a=i("1c74"),n=i("8158");class r extends a["e"]{constructor(){super()}static createAddress(e,t,i){return this.postJson("addresses",{address_type:e,addresses_name:t,parent_location:i})}static getFacilities(e={}){return super.getJson("/locations",e)}static async getSpecialistClinics(){const e=await n["a"].getConceptID("Specialist clinic");return super.getJson("/concept_set",{id:e})}static getRegions(){return super.getJson("/regions")}static getDistricts(e){return super.getJson("/districts",{region_id:e,page_size:1e3})}static getVillages(e,t=""){return super.getJson("/villages",{traditional_authority_id:e,name:t})}static getTraditionalAuthorities(e,t=""){return super.getJson("/traditional_authorities",{district_id:e,name:t})}}},"80ff":function(e,t,i){"use strict";i.r(t);var a=i("7a23");function n(e,t,i,n,r,s){const o=Object(a["resolveComponent"])("his-standard-form");return Object(a["openBlock"])(),Object(a["createBlock"])(o,{cancelDestinationPath:e.cancelDestination,fields:e.fields,onFinishAction:e.onSubmit},null,8,["cancelDestinationPath","fields","onFinishAction"])}var r=i("9441"),s=i("7365"),o=i("2706"),c=i("d95e"),l=i("e86e"),d=i("cc6f");class u extends d["a"]{constructor(e,t){super(e,114,t)}}class p extends d["a"]{constructor(e,t){super(e,42,t)}}var m=Object(a["defineComponent"])({components:{HisStandardForm:r["a"]},mixins:[s["a"]],data:()=>({referralService:{},admissionService:{}}),watch:{ready:{async handler(e){e&&(this.referralService=new u(this.patientID,this.providerID),this.admissionService=new p(this.patientID,this.providerID),this.fields=this.getFields())},immediate:!0,deep:!0}},methods:{async onSubmit(e,t){if("Admission"===e.opd_outcome.value){await this.admissionService.createEncounter();const e=await this.resolveObs({...t},"admission");await this.admissionService.saveObservationList(e)}else{await this.referralService.createEncounter();const e=await this.resolveObs({...t},"referral");await this.referralService.saveObservationList(e)}this.nextTask()},getFields(){return[{id:"opd_outcome",helpText:"Select outcome",type:c["b"].TT_SELECT,validation:e=>o["a"].required(e),options:()=>[{label:"Admit",value:"Admission"},{label:"Internal referral",value:"Internal referral"},{label:"Refer to another hospital/clinic",value:"External referral"}]},{id:"facility_name",helpText:"Select Facility name",type:c["b"].TT_SELECT,validation:e=>o["a"].required(e),computedValue:({value:e})=>({tag:"referral",obs:this.referralService.buildValueText("Referred",e)}),condition:e=>"External referral"===e.opd_outcome.value,options:(e,t="")=>Object(l["b"])(t),config:{showKeyboard:!0,isFilterDataViaApi:!0}},{id:"specialist_clinic",helpText:"Select clinic",type:c["b"].TT_SELECT,validation:e=>o["a"].required(e),computedValue:({other:e})=>({tag:"referral",obs:this.referralService.buildValueCodedFromConceptId("Specialist clinic",e.concept_id)}),condition:e=>"Internal referral"===e.opd_outcome.value,options:()=>Object(l["e"])(),config:{showKeyboard:!0}},{id:"wards",helpText:"Select ward",type:c["b"].TT_SELECT,condition:e=>"Admission"===e.opd_outcome.value,validation:e=>o["a"].required(e),computedValue:({value:e})=>({tag:"admission",obs:this.admissionService.buildValueText("Admit to ward",e)}),options:(e,t="")=>Object(l["c"])(t),config:{showKeyboard:!0,isFilterDataViaApi:!0}}]}}}),f=i("6b0d"),h=i.n(f);const v=h()(m,[["render",n]]);t["default"]=v},e86e:function(e,t,i){"use strict";i.d(t,"b",(function(){return r})),i.d(t,"c",(function(){return s})),i.d(t,"e",(function(){return o})),i.d(t,"d",(function(){return c})),i.d(t,"a",(function(){return l})),i.d(t,"f",(function(){return d})),i.d(t,"g",(function(){return u}));var a=i("5713"),n=i("2ef0");async function r(e=""){const t=await a["a"].getFacilities({name:e});return t.filter(e=>!Object(n["isEmpty"])(e)).map(e=>({label:e.name,value:e.location_id,other:e}))}async function s(e=""){const t=await a["a"].getFacilities({name:e,tag:"Facility adult sections"});return t.map(e=>({label:e.name,value:e.name,other:e}))}async function o(){const e=await a["a"].getSpecialistClinics();return e.map(e=>({label:e.name,value:e.name,other:e}))}async function c(){const e=await a["a"].getRegions();return e.map(e=>({label:e.name,value:e.region_id,other:e}))}async function l(e){const t=await a["a"].getDistricts(e);return t.map(e=>({label:e.name,value:e.district_id,other:e}))}async function d(e,t=""){const i=await a["a"].getTraditionalAuthorities(e,t);return i.map(e=>({label:e.name,value:e.traditional_authority_id,other:e}))}async function u(e,t=""){const i=await a["a"].getVillages(e,t);return i.map(e=>({label:e.name,value:e.village_id,other:e}))}}}]);
//# sourceMappingURL=chunk-ee0b2d28.7c22cf52.js.map