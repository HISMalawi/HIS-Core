(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ba3c49a"],{5713:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("1c74"),a=n("8158");class s extends i["e"]{constructor(){super()}static createAddress(e,t,n){return this.postJson("addresses",{address_type:e,addresses_name:t,parent_location:n})}static getFacilities(e={}){return super.getJson("/locations",e)}static async getSpecialistClinics(){const e=await a["a"].getConceptID("Specialist clinic");return super.getJson("/concept_set",{id:e})}static getRegions(){return super.getJson("/regions")}static getDistricts(e){return super.getJson("/districts",{region_id:e,page_size:1e3})}static getVillages(e,t=""){return super.getJson("/villages",{traditional_authority_id:e,name:t})}static getTraditionalAuthorities(e,t=""){return super.getJson("/traditional_authorities",{district_id:e,name:t})}}},d66c:function(e,t,n){"use strict";n.r(t);var i=n("7a23");function a(e,t,n,a,s,r){const o=Object(i["resolveComponent"])("his-standard-form");return Object(i["openBlock"])(),Object(i["createBlock"])(o,{fields:e.fields,onFinishAction:e.onFinish,skipSummary:!1,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])}n("caad");var s=n("d95e"),r=n("7920"),o=n("2706"),l=n("7365"),c=n("cc6f");class u extends c["a"]{constructor(e,t){super(e,186,t)}}var d=n("b5e4"),p=n("e86e"),h=Object(i["defineComponent"])({mixins:[l["a"]],components:{HisStandardForm:r["a"]},data:()=>({screeningResult:{},obs:[],currentMethod:""}),watch:{patient:{async handler(){this.screeningResult=new u(this.patientID,this.providerID),this.currentMethod=await this.getTreatmentOptions(),this.fields=this.getFields()},deep:!0}},methods:{async onFinish(e,t){const n=await this.screeningResult.createEncounter();if(!n)return Object(d["e"])("Unable to create encounter");e.treatment_option&&"Referral"===e.treatment_option.value&&this.obs.push(this.screeningResult.buildValueText("Referral location",e["location"].label));const i=[];Object.keys(t).forEach(e=>{i.push(t[e].obs)});const a=await Promise.all([...this.obs,...i]);await this.screeningResult.saveObservationList(a),Object(d["d"])("Observations and encounter created!"),this.nextTask()},getFacilities(e=""){return Object(p["b"])(e)},async getTreatmentOptions(){return await this.screeningResult.getFirstValueCoded("CxCa screening method")},getOptions(e){return e||(Object(d["e"])("No screening methods have been selected"),this.gotoPatientDashboard()),e.match(/via/i)?["VIA Negative","VIA Positive","Suspect Cancer"]:e.match(/smear/i)?["PAP Smear Normal","PAP Smear Abnormal"]:e.match(/HPV DNA/i)?["HPV positive","HPV negative"]:e.match(/Speculum/i)?["Visible Lesion","No visible Lesion","Suspect Cancer","Other Gynae"]:[]},getFields(){return[{id:"results_available",helpText:"Screening result available",type:s["b"].TT_SELECT,validation:e=>o["a"].required(e),options:()=>this.yesNoOptions(),computedValue:e=>({obs:this.screeningResult.buildValueCoded("Screening results available",e.value)})},{id:"screening_result",helpText:"Screening Result",type:s["b"].TT_SELECT,validation:e=>o["a"].required(e),options:()=>this.mapOptions([...this.getOptions(this.currentMethod)]),condition(e){return"Yes"===e.results_available.value},computedValue:e=>({obs:this.screeningResult.buildValueCoded("Screening results",e.value)})},{id:"gynae_options",helpText:"Other Gynae treatment",type:s["b"].TT_SELECT,validation:e=>o["a"].required(e),options:()=>this.mapOptions(["STI","Cervicitis"]),condition(e){return"Other Gynae"===e.screening_result.value},computedValue:e=>({obs:this.screeningResult.buildValueCoded("Screening results",e.value)})},{id:"offer_via",helpText:"Offer VIA",type:s["b"].TT_SELECT,validation:e=>o["a"].required(e),options:()=>this.yesNoOptions(),condition(e){return"HPV positive"===e.screening_result.value},computedValue:e=>({obs:this.screeningResult.buildValueCoded("Patient went for VIA?",e.value)})},{id:"via_screening_results",helpText:"VIA screening results",type:s["b"].TT_SELECT,validation:e=>o["a"].required(e),options:()=>this.mapOptions(["VIA negative","VIA positive","Suspect cancer"]),condition(e){return"Yes"===e.offer_via.value},computedValue:e=>({obs:this.screeningResult.buildValueCoded("VIA Results",e.value)})},{id:"reason_for_not_offering_via",helpText:"Reason for NOT offering VIA",type:s["b"].TT_SELECT,validation:e=>o["a"].required(e),options:()=>this.mapOptions(["Client NOT ready","Treatment not available","Other conditions"]),condition(e){return"No"===e.offer_via.value},computedValue:e=>({obs:this.screeningResult.buildValueCoded("Other reason for not seeking services",e.value)})},{id:"treatment_option",helpText:"Enter treatment option",type:s["b"].TT_SELECT,validation:e=>o["a"].required(e),options:()=>this.mapOptions(["Same day treatment","Postponed treatment","Referral"]),condition(e){return!["VIA Negative","No visible Lesion","PAP Smear Abnormal","HPV negative"].includes(e.screening_result.value)},computedValue:e=>({obs:this.screeningResult.buildValueCoded("Directly observed treatment option",e.value)})},{id:"postponed_reason",helpText:"Select reason for postponing treatment",type:s["b"].TT_SELECT,validation:e=>o["a"].required(e),options:()=>this.mapOptions(["Client not ready","Treatment not available","Other conditions"]),condition(e){return"Postponed treatment"===e.treatment_option.value},computedValue:e=>({obs:this.screeningResult.buildValueCoded("Postponed reason",e.value)})},{id:"referral_rreason",helpText:"Referral reason",type:s["b"].TT_SELECT,validation:e=>o["a"].required(e),options:()=>this.mapOptions(["Further Investigation and Management","Large Lesion (Greater than 75 percent)","Unable to treat client","Suspect Cancer","Treatment not available","Other conditions"]),condition(e){return"Referral"===e.treatment_option.value},computedValue:e=>({obs:this.screeningResult.buildValueCoded("Referral reason",e.value)})},{id:"location",helpText:"Location reffered from",type:s["b"].TT_SELECT,validation:e=>o["a"].required(e),options:(e,t="")=>this.getFacilities(t),config:{showKeyboard:!0,isFilterDataViaApi:!0},condition(e){return"Referral"===e.treatment_option.value},computedValue:e=>({obs:this.screeningResult.buildValueText("Referral location",e.label)})}]}}}),g=n("6b0d"),m=n.n(g);const b=m()(h,[["render",a]]);t["default"]=b},e86e:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return c})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return d}));var i=n("5713"),a=n("2ef0");async function s(e=""){const t=await i["a"].getFacilities({name:e});return t.filter(e=>!Object(a["isEmpty"])(e)).map(e=>({label:e.name,value:e.location_id,other:e}))}async function r(e=""){const t=await i["a"].getFacilities({name:e,tag:"Facility adult sections"});return t.map(e=>({label:e.name,value:e.name,other:e}))}async function o(){const e=await i["a"].getSpecialistClinics();return e.map(e=>({label:e.name,value:e.name,other:e}))}async function l(){const e=await i["a"].getRegions();return e.map(e=>({label:e.name,value:e.region_id,other:e}))}async function c(e){const t=await i["a"].getDistricts(e);return t.map(e=>({label:e.name,value:e.district_id,other:e}))}async function u(e,t=""){const n=await i["a"].getTraditionalAuthorities(e,t);return n.map(e=>({label:e.name,value:e.traditional_authority_id,other:e}))}async function d(e,t=""){const n=await i["a"].getVillages(e,t);return n.map(e=>({label:e.name,value:e.village_id,other:e}))}}}]);
//# sourceMappingURL=chunk-7ba3c49a.dee190fc.js.map