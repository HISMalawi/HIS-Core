(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cf669"],{"640e":function(i,e,t){"use strict";t.r(e);var a=t("7a23");function o(i,e,t,o,n,s){const r=Object(a["resolveComponent"])("his-standard-form"),d=Object(a["resolveComponent"])("ion-page");return Object(a["openBlock"])(),Object(a["createBlock"])(d,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(r,{cancelDestinationPath:i.cancelDestination,fields:i.fields,onFinishAction:i.onSubmit},null,8,["cancelDestinationPath","fields","onFinishAction"])]),_:1})}var n=t("9441"),s=t("7365"),r=t("97ed"),d=t("2706"),c=t("d95e"),l=t("66fd"),h=t("5a0c"),u=t.n(h),p=Object(a["defineComponent"])({components:{HisStandardForm:n["a"]},mixins:[s["a"]],data:()=>({radiologyService:{},isPacsEnabled:!1,previousRadiologyExaminations:{}}),watch:{ready:{async handler(i){i&&(this.radiologyService=new r["a"](this.patientID,this.providerID),this.isPacsEnabled=await l["b"].isPACsEnabled(),this.previousRadiologyExaminations=await this.radiologyService.showPreviousRadiolgy(this.patient),this.fields=this.getFields())},immediate:!0,deep:!0}},methods:{async onSubmit(i,e){const t=await Promise.all(e.radiology);await this.radiologyService.createEncounter();const a=await this.radiologyService.obsObj(t),o=await this.radiologyService.saveObservationList(a);if(await this.radiologyService.printOrders(t,this.patient),this.isPacsEnabled)try{await this.radiologyService.submitToPacs(o,this.patient)}catch(n){console.log(n)}this.gotoPatientDashboard()},async getTableData(){const i=await this.radiologyService.getPreviousRadiologyExaminations(this.patient),e=i.data,t=i.url,a=["Accession#","Body Part","Order Type","Ordered","Result"],o=[];for(const n in e){const i=[e[n].children[0].accession_number,e[n].value_text,e[n].children[0].value_text,u()(e[n].obs_datetime).format("DD/MMM/YYYY"),`<ion-button slot="end" size="large" href="${t}" color="success">\n            View\n          </ion-button>`];o.push(i)}return[{label:"",value:"",other:{columns:a,rows:o}}]},getFields(){return[{id:"radiology_results",helpText:"Previous Radiology Examinations",condition:()=>this.previousRadiologyExaminations,type:c["b"].TT_TABLE_VIEWER,options:i=>this.getTableData(),config:{hiddenFooterBtns:["Clear"]}},{id:"radiology",helpText:"Radiology Examination",type:c["b"].TT_RADIOLOGY_PICKER,validation:i=>d["a"].required(i),config:{hiddenFooterBtns:[this.disableBackBtn()]},computedValue:i=>i.map(async i=>({...await this.radiologyService.buildValueCoded("Radiology Orders",i.other.parent),child:await this.radiologyService.buildValueCodedFromConceptId(i.other.parent,i.other.concept_id)}))}]},disableBackBtn(){return this.previousRadiologyExaminations?"":"Back"}}}),b=t("6b0d"),g=t.n(b);const y=g()(p,[["render",o]]);e["default"]=y}}]);
//# sourceMappingURL=chunk-2d0cf669.42e1f3f2.js.map