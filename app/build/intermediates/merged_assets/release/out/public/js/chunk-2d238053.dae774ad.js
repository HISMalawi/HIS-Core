(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d238053"],{fe31:function(e,t,n){"use strict";n.r(t);var o=n("7a23");const i=Object(o["createTextVNode"])(" Patient visit report "),a={class:"view-port-content"},r=Object(o["createTextVNode"])(" Finish ");function s(e,t,n,s,c,d){const l=Object(o["resolveComponent"])("his-standard-form"),h=Object(o["resolveComponent"])("ion-title"),p=Object(o["resolveComponent"])("ion-toolbar"),b=Object(o["resolveComponent"])("ion-header"),u=Object(o["resolveComponent"])("apexchart"),O=Object(o["resolveComponent"])("view-port"),j=Object(o["resolveComponent"])("ion-content"),w=Object(o["resolveComponent"])("ion-button"),m=Object(o["resolveComponent"])("ion-footer"),f=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["withDirectives"])(Object(o["createVNode"])(l,{onOnFinish:e.onPeriod,skipSummary:!0,fields:e.fields},null,8,["onOnFinish","fields"]),[[o["vShow"],!e.canShowReport]]),e.canShowReport?(Object(o["openBlock"])(),Object(o["createBlock"])(f,{key:0},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(b,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(p,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(h,null,{default:Object(o["withCtx"])(()=>[i]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(j,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(O,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])("div",a,[Object(o["createVNode"])(u,{width:e.width,height:e.height,type:e.chartType,options:e.chartOptions,series:e.series,onClick:e.pointSelection},null,8,["width","height","type","options","series","onClick"])])]),_:1})]),_:1}),Object(o["createVNode"])(m,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(p,{color:"dark"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(w,{slot:"end",size:"large","router-link":"/",color:"success"},{default:Object(o["withCtx"])(()=>[r]),_:1})]),_:1})]),_:1})]),_:1})):Object(o["createCommentVNode"])("",!0)],64)}var c=n("8a30"),d=n("0a79"),l=n("ad8d"),h=n("7920"),p=n("44e3"),b=n("2ef0"),u=Object(o["defineComponent"])({components:{IonPage:c["D"],IonHeader:c["q"],IonTitle:c["R"],IonToolbar:c["S"],IonContent:c["n"],IonFooter:c["o"],IonButton:c["d"],ViewPort:d["a"],HisStandardForm:h["a"]},mixins:[p["a"]],data:()=>({chartType:"area",height:"100%",width:"100%",canShowReport:!1,report:{},series:[],patientPresent:{},guardianPresent:{},bothPresent:{},chartOptions:{title:{text:"HIV Reception encounters"},yaxis:{title:{text:"Number of clients"},plotAreaHeight:800},xaxis:{type:"datetime"}}}),created(){this.fields=this.getDateDurationFields()},methods:{async onPeriod(e,t){await this.presentLoading(),this.canShowReport=!0,this.report=new l["b"],this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date);const n=await this.report.getPatientVisitTypes();this.series=this.buildSeries(n),c["X"].dismiss()},async presentLoading(){const e=await c["X"].create({message:"Please wait...",backdropDismiss:!1});await e.present()},pointSelection(e,t,n){try{const{dataPointIndex:e,seriesIndex:t}=n,o=t<=0?0:t;this.runTableDrill(this.series[o].raw[e])}catch(e){}},buildSeries(e){const t=Object(b["uniq"])(Object.keys(e)),n=(t,n,o)=>{t in n||(n[t]=[]);const i=Object.entries(e[t]).filter(([e,t])=>o(t.patient_present,t.guardian_present)).map(([e])=>e);return n[t]=[...n[t],...i],n},o=e=>t.map(t=>[new Date(t).getTime(),e[t].length]),i=e=>t.map(t=>e[t]);for(const a in e)n(a,this.patientPresent,(e,t)=>e&&!t),n(a,this.guardianPresent,(e,t)=>!e&&t),n(a,this.bothPresent,(e,t)=>e&&t);return[{name:"Patient present",raw:i(this.patientPresent),data:o(this.patientPresent)},{name:"Guardian present",raw:i(this.guardianPresent),data:o(this.guardianPresent)},{name:"Both patient and guardian present",raw:i(this.bothPresent),data:o(this.bothPresent)}]}}}),O=n("6b0d"),j=n.n(O);const w=j()(u,[["render",s]]);t["default"]=w}}]);
//# sourceMappingURL=chunk-2d238053.dae774ad.js.map