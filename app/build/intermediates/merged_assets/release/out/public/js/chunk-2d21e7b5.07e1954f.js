(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21e7b5"],{d66c:function(e,t,i){"use strict";i.r(t);var n=i("7a23");function a(e,t,i,a,o,s){const r=Object(n["resolveComponent"])("his-standard-form");return Object(n["openBlock"])(),Object(n["createBlock"])(r,{fields:e.fields,onFinishAction:e.onFinish,skipSummary:!1,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])}i("caad");var o=i("d95e"),s=i("7920"),r=i("2706"),l=i("7365"),u=i("cc6f");class c extends u["a"]{constructor(e,t){super(e,186,t)}}var d=i("b5e4"),p=i("e86e"),h=Object(n["defineComponent"])({mixins:[l["a"]],components:{HisStandardForm:s["a"]},data:()=>({screeningResult:{},obs:[],currentMethod:""}),watch:{patient:{async handler(){this.screeningResult=new c(this.patientID,this.providerID),this.currentMethod=await this.getTreatmentOptions(),this.fields=this.getFields()},deep:!0}},methods:{async onFinish(e,t){const i=await this.screeningResult.createEncounter();if(!i)return Object(d["e"])("Unable to create encounter");e.treatment_option&&"Referral"===e.treatment_option.value&&this.obs.push(this.screeningResult.buildValueText("Referral location",e["location"].label));const n=[];Object.keys(t).forEach(e=>{n.push(t[e].obs)});const a=await Promise.all([...this.obs,...n]);await this.screeningResult.saveObservationList(a),Object(d["d"])("Observations and encounter created!"),this.nextTask()},getFacilities(e=""){return Object(p["b"])(e)},async getTreatmentOptions(){return await this.screeningResult.getFirstValueCoded("CxCa screening method")},getOptions(e){return e||(Object(d["e"])("No screening methods have been selected"),this.gotoPatientDashboard()),e.match(/via/i)?["VIA Negative","VIA Positive","Suspect Cancer"]:e.match(/smear/i)?["PAP Smear Normal","PAP Smear Abnormal"]:e.match(/HPV DNA/i)?["HPV positive","HPV negative"]:e.match(/Speculum/i)?["Visible Lesion","No visible Lesion","Suspect Cancer","Other Gynae"]:[]},getFields(){return[{id:"results_available",helpText:"Screening result available",type:o["b"].TT_SELECT,validation:e=>r["a"].required(e),options:()=>this.yesNoOptions(),computedValue:e=>({obs:this.screeningResult.buildValueCoded("Screening results available",e.value)})},{id:"screening_result",helpText:"Screening Result",type:o["b"].TT_SELECT,validation:e=>r["a"].required(e),options:()=>this.mapOptions([...this.getOptions(this.currentMethod)]),condition(e){return"Yes"===e.results_available.value},computedValue:e=>({obs:this.screeningResult.buildValueCoded("Screening results",e.value)})},{id:"gynae_options",helpText:"Other Gynae treatment",type:o["b"].TT_SELECT,validation:e=>r["a"].required(e),options:()=>this.mapOptions(["STI","Cervicitis"]),condition(e){return"Other Gynae"===e.screening_result.value},computedValue:e=>({obs:this.screeningResult.buildValueCoded("Screening results",e.value)})},{id:"offer_via",helpText:"Offer VIA",type:o["b"].TT_SELECT,validation:e=>r["a"].required(e),options:()=>this.yesNoOptions(),condition(e){return"HPV positive"===e.screening_result.value},computedValue:e=>({obs:this.screeningResult.buildValueCoded("Patient went for VIA?",e.value)})},{id:"via_screening_results",helpText:"VIA screening results",type:o["b"].TT_SELECT,validation:e=>r["a"].required(e),options:()=>this.mapOptions(["VIA negative","VIA positive","Suspect cancer"]),condition(e){return"Yes"===e.offer_via.value},computedValue:e=>({obs:this.screeningResult.buildValueCoded("VIA Results",e.value)})},{id:"reason_for_not_offering_via",helpText:"Reason for NOT offering VIA",type:o["b"].TT_SELECT,validation:e=>r["a"].required(e),options:()=>this.mapOptions(["Client NOT ready","Treatment not available","Other conditions"]),condition(e){return"No"===e.offer_via.value},computedValue:e=>({obs:this.screeningResult.buildValueCoded("Other reason for not seeking services",e.value)})},{id:"treatment_option",helpText:"Enter treatment option",type:o["b"].TT_SELECT,validation:e=>r["a"].required(e),options:()=>this.mapOptions(["Same day treatment","Postponed treatment","Referral"]),condition(e){return!["VIA Negative","No visible Lesion","PAP Smear Abnormal","HPV negative"].includes(e.screening_result.value)},computedValue:e=>({obs:this.screeningResult.buildValueCoded("Directly observed treatment option",e.value)})},{id:"postponed_reason",helpText:"Select reason for postponing treatment",type:o["b"].TT_SELECT,validation:e=>r["a"].required(e),options:()=>this.mapOptions(["Client not ready","Treatment not available","Other conditions"]),condition(e){return"Postponed treatment"===e.treatment_option.value},computedValue:e=>({obs:this.screeningResult.buildValueCoded("Postponed reason",e.value)})},{id:"referral_rreason",helpText:"Referral reason",type:o["b"].TT_SELECT,validation:e=>r["a"].required(e),options:()=>this.mapOptions(["Further Investigation and Management","Large Lesion (Greater than 75 percent)","Unable to treat client","Suspect Cancer","Treatment not available","Other conditions"]),condition(e){return"Referral"===e.treatment_option.value},computedValue:e=>({obs:this.screeningResult.buildValueCoded("Referral reason",e.value)})},{id:"location",helpText:"Location reffered from",type:o["b"].TT_SELECT,validation:e=>r["a"].required(e),options:(e,t="")=>this.getFacilities(t),config:{showKeyboard:!0,isFilterDataViaApi:!0},condition(e){return"Referral"===e.treatment_option.value},computedValue:e=>({obs:this.screeningResult.buildValueText("Referral location",e.label)})}]}}}),b=i("6b0d"),v=i.n(b);const m=v()(h,[["render",a]]);t["default"]=m}}]);
//# sourceMappingURL=chunk-2d21e7b5.07e1954f.js.map