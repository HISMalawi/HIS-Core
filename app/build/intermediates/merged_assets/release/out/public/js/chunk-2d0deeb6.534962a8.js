(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0deeb6"],{8866:function(e,t,i){"use strict";i.r(t);var a=i("7a23");function n(e,t,i,n,r,s){const o=Object(a["resolveComponent"])("his-standard-form");return Object(a["openBlock"])(),Object(a["createBlock"])(o,{fields:e.fields,onFinishAction:e.onFinish,skipSummary:!0,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])}var r=i("d95e"),s=i("7920"),o=i("b515"),l=i("7365"),h=i("ad60"),c=i("2ef0"),u=Object(a["defineComponent"])({mixins:[l["a"]],components:{HisStandardForm:s["a"]},data:()=>({age:null,gender:null,recentHeight:null,vitals:{},weightForHeight:{},medianWeightandHeight:{}}),watch:{ready:{async handler(e){e&&await this.init(this.patient)},immediate:!0}},methods:{async init(e){this.vitals=new o["a"](e.getID(),this.providerID),this.age=e.getAge(),this.gender=e.getGender();const t=await e.getRecentHeight();this.recentHeight=-1==t?null:t,this.age<=14&&(this.medianWeightandHeight=await e.getMedianWeightHeight(),this.weightForHeight=await h["a"].getWeightForHeightValues()),this.fields=this.getFields()},async onFinish(e,t){await this.vitals.createEncounter(),await this.vitals.saveObservationList(await this.resolveObs(t)),this.nextTask()},validateVitals(e){const t=this.checkRequiredVitals(e);if(t.length>0)return t.map(e=>[e.label+" can not be empty"]);const i=this.sanitizeVitals(e);return this.vitals.validateAll(i)},sanitizeVitals(e){return e.filter(e=>("Height"!==e.label||0!=e.other.required)&&(""!==e.value&&"Age"!==e.label))},checkRequiredVitals(e){return e.filter(e=>""===e.value&&!0===e.other.required)},getFields(){return[{id:"vitals",helpText:"Vitals entry",type:r["b"].TT_VITALS_ENTRY,validation:e=>this.validateVitals(e),computedValue:e=>{let t=[];const i=e.filter(e=>!e.other.doNotSave);return i.forEach(e=>{var i;e.value&&("function"===typeof(null===(i=e.other)||void 0===i?void 0:i.computed)?t=t.concat(e.other.computed(e.value)):t.push(this.vitals.buildValueNumber(e.label,e.value)))}),t},config:{hiddenFooterBtns:["Clear"],onUpdateAlertStatus:e=>{const t=Object(c["find"])(e,{label:"BP"});if(t&&""!=t.value){const[e,i]=(""+t.value).split("/").map(e=>parseInt(e));if(e>=140&&i>=90)return{status:"Client is at risk of pre-eclampsia, refer for urine protein test.",color:"brown"};if(e<120||e>140)return{status:"Systolic reading is out of normal range",color:"brown"};if(i<80||i>90)return{status:"Diastolic reading is out of normal range",color:"brown"};if(e>=130&&e<=139&&i>=80&&i<=89)return{status:"Prehypertension",color:"brown"}}return{status:"",color:""}},onChangeOption:e=>{if(!e.value&&e.other.required)throw`Value for ${e.label} is required`;if(e.value){const t=this.vitals.validator(e);if(t&&t.length)throw t}}},options:()=>{const e=this.recentHeight&&this.age>18?this.recentHeight:"",t=!(e&&this.age>18);return[{label:"Weight",value:"",other:{modifier:"KG",icon:"weight",required:!0}},{label:"Height",value:""+e,other:{modifier:"CM",icon:"height",recentHeight:this.recentHeight,visible:t}},{label:"BP",value:"",other:{computed:e=>{const[t,i]=e.split("/");return[this.vitals.buildValueNumber("Systolic",t),this.vitals.buildValueNumber("Diastolic",i)]},modifier:"mmHG",icon:"bp"}},{label:"Age",value:this.age,other:{doNotSave:!0,modifier:"Years old",icon:"",visible:!1}}]}}]}}}),d=i("6b0d"),g=i.n(d);const v=g()(u,[["render",n]]);t["default"]=v}}]);
//# sourceMappingURL=chunk-2d0deeb6.534962a8.js.map